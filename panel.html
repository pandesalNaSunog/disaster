<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
    <link rel="stylesheet" href="panelstyle.css">
    <script>
        $(document).ready(function(){
            let loadingScreen = $('#loading-screen');
            let usersLink = $('#users-link');
            let navLink = $('.nav-link');
            let usersTable = $('#users-table');
            let usersSection = $('#users-section');
            let notifier = $('#notifier');
            let toastMessage = $('#toast-message');
            let feedLink = $('#feed-link');
            let feedSection = $('#feed-section');
            let postList = $('#post-list');
            let barangayTable = $('#barangay-table');
            let addBarangay = $('#add-barangay');
            let addBarangayError = $('#add-barangay-error');
            let confirmAddBarangay = $('#confirm-add-barangay');
            let addBarangayModal = $('#add-barangay-modal');
            let barangayLink = $('#barangay-link');
            let barangaySection = $('#barangay-section');
            let settingsLink = $('#settings-link');
            let settingsSection = $('#settings-section');
            let currentPassword = $('#current-password');
            let confirmCurrentPassword = $("#confirm-current-password");
            let currentPasswordError = $('#current-password-error');
            let currentPasswordModal = $('#current-password-modal');
            let analyticsSection = $('#analytics-section');
            let analyticsLink = $("#analytics-link");
            let analyticsEachBarangay = $('#analytics-each-barangay');
            let analyticsMonth = $('#analytics-month');
            let analyticsYear = $('#analytics-year');
            let generateAnalytics = $('#generate-analytics');
            let analyticsYearError = $('#analytics-year-error');
            let barangayPostList = $('#barangay-post-list');
            let barangayName = $('#barangay-name');
            let updatePassword = $('#update-password');
            let updatePasswordError = $('#update-password-error');
            let retypeUpdatePassword = $('#retype-update-password');
            let retypeUpdatePasswordError = $('#retype-update-password-error');
            let confirmUpdatePassword = $('#confirm-update-password');
            let updatePasswordModal = $('#update-password-modal');
            let logout = $('#logout');
            removeInputError(updatePassword);
            removeInputError(retypeUpdatePassword);


            logout.on('click', function(){
                if(confirm('Are your sure you want to log out?') == true){
                    $.ajax({
                        type: 'GET',
                        url: 'php/logout.php',
                        success: function(response){
                            if(response == 'ok'){
                                window.location.replace('index.html');
                            }
                        }
                    })
                }
            })

            confirmUpdatePassword.on('click', function(){
                if(updatePassword.val() == ""){
                    updatePassword.addClass('is-invalid');
                    updatePasswordError.text('Please fill out this field');
                }else if(retypeUpdatePassword.val() == ""){
                    retypeUpdatePassword.addClass('is-invalid');
                    retypeUpdatePasswordError.text('Please fill out this field');
                }else if(retypeUpdatePassword.val() != updatePassword.val()){
                    updatePassword.addClass('is-invalid');
                    updatePasswordError.text('Password Mismatch');
                }else{
                    confirmUpdatePassword.prop('disabled', true);
                    $.ajax({
                        type: 'POST',
                        url: 'php/updatePassword.php',
                        data:{
                            password: updatePassword.val(),
                        },
                        success: function(response){
                            confirmUpdatePassword.prop('disabled', false);
                            updatePassword.val('');
                            retypeUpdatePassword.val('');
                            if(response == 'ok'){
                                alert('Password successfully changed.');
                                updatePasswordModal.modal('hide');
                                updatePassword
                            
                            }else{
                                alert('Session expired. Please log in to continue.')
                                window.location.replace('index.html');
                            }
                        }
                    })
                }
            })

            removeInputError(analyticsYear);
            generateAnalytics.on('click', function(){
                if(analyticsYear.val() == ""){
                    analyticsYear.addClass('is-invalid');
                    analyticsYearError.text('Please fill out this field');
                }else{
                    generateAnalytics.prop('disabled', true);
                    $.ajax({
                        type: 'POST',
                        url: 'php/analytics.php',
                        data:{
                            year: analyticsYear.val(),
                            month: analyticsMonth.val(),
                        },
                        success: function(response){
                            generateAnalytics.prop('disabled', false);
                            let data = JSON.parse(response);
                            displayAnalytics(data.total_posts_for_each_barangay)
                        }
                    })
                }
            })

            function removeInputError(input){
                input.on('keydown', function(){
                    input.removeClass('is-invalid');
                })
                
            }

            currentPassword.on('keydown', function(){
                currentPassword.removeClass('is-invalid');
            })

            confirmCurrentPassword.on('click', function(){
                if(currentPassword.val() == ""){
                    currentPasswordError.text('Please fill out this field');
                    currentPassword.addClass('is-invalid')
                }else{
                    confirmCurrentPassword.text('Please Wait...');
                    confirmCurrentPassword.prop('disabled', true);

                    $.ajax({
                        type: 'POST',
                        url: 'php/currentPassword.php',
                        data:{
                            password: currentPassword.val(),
                        },
                        success: function(response){
                            confirmCurrentPassword.prop('disabled', false)
                            confirmCurrentPassword.text('Confirm')
                            if(response == 'ok'){
                                currentPasswordModal.modal('hide');
                                currentPassword.val('');
                                updatePasswordModal.modal('show');
                            }else if(response == 'invalid'){
                                currentPassword.addClass('is-invalid');
                                currentPasswordError.text('Invalid Password.');
                            }else{
                                alert('Session Expired. Please log in to continue.');
                                window.location.replace('index.html');
                            }
                        }
                    })
                }
            })

            confirmAddBarangay.on('click', function(){
                if(addBarangay.val() == ""){
                    addBarangayError.text('Please fill out this field')
                    addBarangay.addClass('is-invalid');
                }else{
                    confirmAddBarangay.prop('disabled', true);
                    confirmAddBarangay.text('Adding...');

                    $.ajax({
                        type: 'POST',
                        url: 'php/addbrgy.php',
                        data:{
                            barangay: addBarangay.val()
                        },
                        success: function(response){
                            confirmAddBarangay.prop('disabled', false);
                            confirmAddBarangay.text('Confirm');
                            notifier.toast('show');
                            toastMessage.text('New barangay has been added.');
                            addBarangay.val('');
                            addBarangayModal.modal('hide');

                            var data = JSON.parse(response);

                            addToBarangayTable(barangayTable.children().length, data.id, data.barangay);
                        }
                    })
                }
            })

            function addToBarangayTable(index, id, barangay){
                barangayTable.append(`<tr>
                                            <td>${barangay}</td>
                                            <td>
                                                <button class="btn btn-outline-light"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16">
                                                <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                                                <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
                                                </svg></button>

                                                <button class="btn btn-outline-light"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3-fill" viewBox="0 0 16 16">
                                                <path d="M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5Zm-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5ZM4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06Zm6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528ZM8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5Z"/>
                                                </svg></button>
                                                <button value="${id}" data-bs-target="#barangay-posts-modal" data-bs-toggle="modal" class="view-reports btn btn-outline-light">View Incident Reports</button>
                                            
                                                
                                            </td>
                                        </tr>`)
                let viewReports = barangayTable.children().eq(index).find('.view-reports');

                viewReports.on('click', function(){
                    let thisReport = $(this);
                    barangayPostList.children().remove();
                    thisReport.prop('disabled', true);
                    barangayName.text(barangay);
                    $.ajax({
                        type: 'POST',
                        url: 'php/posts.php',
                        data:{
                            barangay_id: thisReport.val()
                        },
                        success: function(response){
                            viewReports.prop('disabled', false)
                            let data = JSON.parse(response);
                            $(data).each(function(index, value){
                                addToPostsList('barangay-section', index, value.id, value.user, value.caption, value.image, value.response, value.date, value.barangay)
                            })
                            
                        }
                    })
                })
            }

            navLink.on('click', function(){
                navLink.removeClass('active');
                $(this).addClass('active');
            })

            analyticsLink.on('click', function(){
                usersSection.hide();
                feedSection.hide();
                barangaySection.hide();
                settingsSection.hide();
                analyticsSection.show();

                getAnalytics();
            })

            function getAnalytics(){
                loadingScreen.show();
                analyticsEachBarangay.children().remove();
                $.ajax({
                    type: 'GET',
                    url: 'php/analytics.php',
                    success: function(response){
                        loadingScreen.hide()
                        let data = JSON.parse(response);

                        displayAnalytics(data.total_posts_for_each_barangay,data.date)
                    }
                })
            }


            function displayAnalytics(totalPostsForEachBarangay, date){
                analyticsEachBarangay.children().remove();
                var barColors = [
                    "#b91d47",
                    "#00aba9",
                    "#2b5797",
                    "#e8c3b9",
                    "#1e7145"
                ];
                var xValues = []
                var yValues = []
                $(totalPostsForEachBarangay).each(function(index, value){
                    xValues.push(value.barangay_name);
                    yValues.push(value.number_of_posts);

                    addToAnalyticsEachBarangay(index, value.id, value.barangay_name, value.number_of_posts, value.case_closed, value.crew_dispatched, value.pending, date)
                })
                new Chart("myChart", {
                    type: "pie",
                    data: {
                        labels: xValues,
                        datasets: [{
                            backgroundColor: barColors,
                            data: yValues
                        }]
                    },
                    options: {
                        title: {
                            display: true,
                            text: "Overall Incident Reports For Each Barangay as of " + date
                        }
                    }
                });
            }
            
            function addToAnalyticsEachBarangay(index, id, barangayName, numberOfPosts, caseClosedData, crewDispatchedData, pendingData, date){
                var marginTop = " ";
                if(index != 0){
                    marginTop = " mt-3 ";
                }
                analyticsEachBarangay.append(`<div class="card${marginTop}shadow rounded-3 bg-dark text-light">
                                                <div class="card-body">
                                                    <canvas style="width: 100%" id=${id}>
                                                </div>
                                            </div>`)
                let chart = analyticsEachBarangay.children().eq(index).find('canvas');
                let xValues = ['Pending','Case Closed','Crew Dispatched'];
                let yValues = [pendingData, caseClosedData, crewDispatchedData];
                let barColors = ["#b91d47","#00aba9","#2b5797"];
                Chart.defaults.global.defaultFontColor = "#fff";
                new Chart(id, {
                    type: "pie",
                    data: {
                        labels: xValues,
                        datasets: [{
                            backgroundColor: barColors,
                            data: yValues,
                        }]
                    },
                    options: {
                        title: {
                            display: true,
                            text: "Incident Reports for Barangay " + barangayName + " As Of " + date
                        }
                    }
                });
            }

            usersLink.on('click', function(){
                usersSection.show();
                feedSection.hide();
                barangaySection.hide();
                settingsSection.hide();
                analyticsSection.hide();
                getUsers();
            })
            feedLink.on('click', function(){
                usersSection.hide();
                feedSection.show();
                barangaySection.hide();
                settingsSection.hide();
                analyticsSection.hide();
                getPosts();
            })

            barangayLink.on('click', function(){
                usersSection.hide();
                feedSection.hide();
                barangaySection.show();
                settingsSection.hide();
                analyticsSection.hide();
                getBarangays();
            })

            settingsLink.on('click', function(){
                usersSection.hide();
                feedSection.hide();
                barangaySection.hide();
                settingsSection.show();
                analyticsSection.hide();
            })
            


            session();
            loadingScreen.hide();
            getUsers();

            feedSection.hide()
            barangaySection.hide()
            settingsSection.hide()
            analyticsSection.hide()

            function getBarangays(){
                loadingScreen.show();
                barangayTable.children().remove();
                $.ajax({
                    type: 'GET',
                    url: 'php/barangays.php',
                    success: function(response){
                        loadingScreen.hide();
                        var data = JSON.parse(response);
                        $(data).each(function(index, value){
                            addToBarangayTable(index, value.id, value.barangay);
                        })
                    }
                })
            }
            function getPosts(){
                loadingScreen.show();
                postList.children().remove();

                $.ajax({
                    type: 'GET',
                    url: 'php/posts.php',
                    success: function(response){
                        loadingScreen.hide();
                        var data = JSON.parse(response);

                        $(data).each(function(index, value){
                            addToPostsList('post-section',index, value.id, value.user, value.caption, value.image, value.response, value.date, value.barangay);
                        })
                    }
                })
            }

            function addToPostsList(section,index, id, user, caption, image, response, date, barangay){
                var postContainer;
                var columnSize;
                if(section == 'post-section'){
                    postContainer = postList;
                    columnSize = " col-lg-6 ";
                }else{
                    postContainer = barangayPostList;
                    columnSize = " ";
                }
                postContainer.append(`<div class="text-light card${columnSize}mx-auto mt-5 bg-dark rounded-3 shadow">
                                    <div class="card-header">
                                        <h4 class="fw-bold">${user.name}</h4>
                                        <span style="font-size: 12px"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-calendar-event" viewBox="0 0 16 16">
                                            <path d="M11 6.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1z"/>
                                            <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
                                        </svg><span class="ms-2">${date}</span></span>
                                        <br>
                                        <span style="font-size: 15px"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-geo-alt-fill" viewBox="0 0 16 16">
                                            <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>
                                        </svg><span class="ms-3">${barangay}</span></span>
                                    </div>
                                    <div class="card-body">
                                        <p class="lead">${caption}</p>

                                        <img src="disasterapi/public/${image}" class="img-fluid">
                                        <div class="input-group mt-3" style="width: 100%">
                                            <button value="${id}" class="case-closed col btn btn-outline-success"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-circle-fill" viewBox="0 0 16 16">
                                            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                                            </svg> Case Closed</button>
                                            <button value="${id}" class="crew-dispatched col btn btn-outline-primary"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-circle-fill" viewBox="0 0 16 16">
                                            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                                            </svg> Crew Dispatched</button>
                                        </div>
                                    </div>
                                </div>`)

                let caseClosed = postContainer.children().eq(index).find('.case-closed');
                let crewDispatched = postContainer.children().eq(index).find('.crew-dispatched');


                if(response == 'case closed'){
                    caseClosed.removeClass('btn-outline-success');
                    caseClosed.addClass('btn-success');
                    crewDispatched.removeClass('btn-primary');
                    crewDispatched.addClass('btn-outline-primary');
                }else if(response == 'crew dispatched'){
                    caseClosed.removeClass('btn-success');
                    caseClosed.addClass('btn-outline-success');
                    crewDispatched.addClass('btn-primary');
                    crewDispatched.removeClass('btn-outline-primary');
                }

                caseClosed.on('click', function(){
                    var postId = $(this).val()
                    $.ajax({
                        type: 'POST',
                        url: 'php/updatePostResponse.php',
                        data:{
                            post_id: postId,
                            response: 'case closed'
                        },
                        success: function(response){
                            if(response == 'ok'){
                                caseClosed.removeClass('btn-outline-success');
                                caseClosed.addClass('btn-success');
                                crewDispatched.removeClass('btn-primary');
                                crewDispatched.addClass('btn-outline-primary');
                            }
                        }
                    })
                })

                crewDispatched.on('click', function(){
                    var postId = $(this).val()
                    $.ajax({
                        type: 'POST',
                        url: 'php/updatePostResponse.php',
                        data:{
                            post_id: postId,
                            response: 'crew dispatched'
                        },
                        success: function(response){
                            if(response == 'ok'){
                                caseClosed.removeClass('btn-success');
                                caseClosed.addClass('btn-outline-success');
                                crewDispatched.addClass('btn-primary');
                                crewDispatched.removeClass('btn-outline-primary');
                            }
                        }
                    })
                })
            }

            function getUsers(){
                loadingScreen.show()
                usersTable.children().remove();
                $.ajax({
                    type: 'GET',
                    url: 'php/users.php',
                    success: function(response){
                        loadingScreen.hide();
                        var data = JSON.parse(response);
                        $(data).each(function(index, value){
                            addToUsersTable(index, value.id, value.name, value.email, value.contact, value.address)
                        })
                    }
                })
            }

            function addToUsersTable(index, id, name, email, contact, address){
                usersTable.append(`<tr>
                                        <td>${name}</td>
                                        <td>${email}</td>
                                        <td>${contact}</td>
                                        <td>${address}</td>
                                        <td>
                                            <button value="${id}" class="delete-button btn btn-dark"><span class="progresser spinner-border spinner-border-sm"></span> Delete</button>
                                        </td>
                                    </tr>`)

                let deleteButton = usersTable.children().eq(index).find('.delete-button');
                let progress = usersTable.children().eq(index).find('.progresser');
                progress.hide();
                deleteButton.on('click', function(){
                    var thisDelete = $(this)
                    if(confirm('Delete this user?') == true){
                        progress.show()
                        deleteButton.prop('disabled', true);
                        var thisId = $(this).val()

                        $.ajax({
                            type: 'POST',
                            url: 'php/deleteUser.php',
                            data:{
                                user_id: thisId
                            },
                            success: function(response){
                                progress.hide();
                                deleteButton.prop('disabled', false);
                                if(response == 'ok'){
                                    notifier.toast('show');
                                    notifier.toast({delay: 5000});
                                    toastMessage.text('User has been deleted.')
                                    thisDelete.parent().parent().remove();
                                }
                            }
                        })
                    }
                })
            }
            function session(){
                $.ajax({
                    type: 'GET',
                    url: 'php/session.php',
                    success: function(response){
                        if(response != 'ok'){
                            window.location.replace(response)
                        }
                    }
                })
            }
        })
    </script>
    <title>Document</title>
</head>
<body>
    <nav class="sticky-top shadow navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <div class="navbar-brand d-flex align-items-center">
                <img src="logo.jpg" class="img-fluid shadow rounded-3" style="height: 50px; width: 50px" alt="">
                <h5 class="fw-bold ms-4">
                    Exodus Search and Rescue Inc.
                </h5>
            </div>
            <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navmenu">
                <span class="navbar-toggler-icon">

                </span>
            </button>
            <div class="collapse navbar-collapse" id="navmenu">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a href="#" id="users-link" class="px-3 navigation-links nav-link active mx-2"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
                            <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                            <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
                          </svg><span class="ms-3">Users</span></a>
                    </li>

                    <li class="nav-item">
                        <a href="#" id="barangay-link" class="px-3 navigation-links nav-link mx-2"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-geo-alt-fill" viewBox="0 0 16 16">
                            <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>
                          </svg><span class="ms-3">Barangays</span></a>
                    </li>
                    <li class="nav-item">
                        <a href="#" id="feed-link" class="px-3 navigation-links nav-link mx-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-newspaper" viewBox="0 0 16 16">
                                <path d="M0 2.5A1.5 1.5 0 0 1 1.5 1h11A1.5 1.5 0 0 1 14 2.5v10.528c0 .3-.05.654-.238.972h.738a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 1 1 0v9a1.5 1.5 0 0 1-1.5 1.5H1.497A1.497 1.497 0 0 1 0 13.5v-11zM12 14c.37 0 .654-.211.853-.441.092-.106.147-.279.147-.531V2.5a.5.5 0 0 0-.5-.5h-11a.5.5 0 0 0-.5.5v11c0 .278.223.5.497.5H12z"/>
                                <path d="M2 3h10v2H2V3zm0 3h4v3H2V6zm0 4h4v1H2v-1zm0 2h4v1H2v-1zm5-6h2v1H7V6zm3 0h2v1h-2V6zM7 8h2v1H7V8zm3 0h2v1h-2V8zm-3 2h2v1H7v-1zm3 0h2v1h-2v-1zm-3 2h2v1H7v-1zm3 0h2v1h-2v-1z"/>
                              </svg><span class="ms-3">Reports</span></a>
                    </li>
                    <li class="nav-item">
                        <a href="#" id="analytics-link" class="px-3 nav-link navigation-links mx-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-graph-up" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M0 0h1v15h15v1H0V0Zm14.817 3.113a.5.5 0 0 1 .07.704l-4.5 5.5a.5.5 0 0 1-.74.037L7.06 6.767l-3.656 5.027a.5.5 0 0 1-.808-.588l4-5.5a.5.5 0 0 1 .758-.06l2.609 2.61 4.15-5.073a.5.5 0 0 1 .704-.07Z"/>
                              </svg><span class="ms-3">Analytics</span></a>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" id="settings-link" class="px-3 navigation-links nav-link mx-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear-fill" viewBox="0 0 16 16">
                                <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
                              </svg><span class="ms-3">Settings</span></a>
                    </li>

                    <li class="nav-item">
                        <a href="#" id="logout" class="px-3 navigation-links nav-link mx-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-right" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"/>
                                <path fill-rule="evenodd" d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"/>
                              </svg><span class="ms-3">Log Out</span></a>
                    </li>
                    
                </ul>
            </div>
        </div>
    </nav>

    <section id="analytics-section">
        <div class="container">
            <div class="row row-cols-1 g-3 row-cols-lg-2 mt-5">
                <div class="col">
                    <div class="card bg-dark text-light shadow rounded-4 shadow">
                        <div class="card-body">
                            <div class="form-floating text-dark">
                                <input type="number" class="form-control" placeholder= "a" id="analytics-year">
                                <label for="analytics-year">Year</label>
                                <div class="invalid-feedback" id="analytics-year-error"></div>
                            </div>
    
                            <select id="analytics-month" class="mt-3 form-select">
                                <option value="01" selected>January</option>
                                <option value="02">February</option>
                                <option value="03">March</option>
                                <option value="04">April</option>
                                <option value="05">May</option>
                                <option value="06">June</option>
                                <option value="07">July</option>
                                <option value="08">August</option>
                                <option value="09">September</option>
                                <option value="10">October</option>
                                <option value="11">November</option>
                                <option value="12">December</option>
                            </select>
                            <button class="btn btn-secondary w-100 mt-3" id="generate-analytics">Generate Analytics</button>
                        </div>
                        
                        
                    </div>
                    <div class="mt-3 card bg-dark mx-auto rounded-3 shadow">
                        <div class="card-header">
                            <h4 class="fw-bold text-light">
                                Analytics
                            </h4>
                        </div>
                        <div class="card-body">
                            <canvas id="myChart" style="width:100%; height: 50vh;"></canvas>
                        </div>
                    </div>
                </div>
                <div class="col" id="analytics-each-barangay">

                </div>
            </div>
            
        </div>
    </section>

    <section id="settings-section">
        <div class="container">
            <div class="card bg-dark col-lg-6 mx-auto rounded-3 shadow mt-5">
                <div class="card-header">
                    <h4 class="fw-bold text-light">
                        Account Settings
                    </h4>
                </div>
                <div class="card-body">
                    <table class="table table-responsive table-hover table-dark">
                        <tbody>
                            <tr>
                                <td>
                                    Password
                                </td>
                                <td>
                                    <button class="btn btn-secondary" data-bs-target="#current-password-modal" data-bs-toggle="modal">Update Password</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>


    <section id="users-section">
        <div class="container">
            <div class="card bg-dark rounded-3 shadow mt-5">
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-hover table-dark">
                            <thead>
                                <th scope="col">Name</th>
                                <th scope="col">Email</th>
                                <th scope="col">Contact Number</th>
                                <th scope="col">Address</th>
                                <th scope="col">Actions</th>
                            </thead>
                            <tbody id="users-table">
    
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="barangay-section">
        <div class="container">
            <div class="col-lg-5 mx-auto card shadow mt-5 rounded-3 bg-dark">
                <div class="card-header">
                    <button class="btn btn-light" data-bs-target="#add-barangay-modal" data-bs-toggle="modal">
                        Add Barangay
                    </button>
                    
                </div>
                <div class="card-body">
                    <table class="table table-striped table-hover table-dark">
                        <thead>
                            <th scope="col">Barangay</th>
                            <th scope="col">Actions</th>
                        </thead>
                        <tbody id="barangay-table">
    
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
    </section>

    <div class="modal fade" id="add-barangay-modal" data-bs-backdrop="static"s>
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="fw-bold">
                        Add Barangay
                    </h4>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div>
                        <input id="add-barangay" type="text" placeholder="Barangay" class="form-control">
                        <div class="invalid-feedback" id="add-barangay-error"></div>
                    </div>
                    
                    <button id="confirm-add-barangay" class="btn btn-dark w-100 fw-bold mt-3">
                        Confirm
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="loading-screen" style="background-color: rgba(0,0,0,0.5);width: 100%; height: 100vh;position: fixed;top:0; left:0; display: flex; justify-content:center; align-items: center;">
        <div class="card rounded-3">
            <div class="card-body text-center">
                <div class="spinner-border text-dark">

                </div>
                <p>Please Wait...</p>
            </div>
        </div>
    </div>

    <div class="toast-container bottom-0 end-0 m-5">
        <div class="toast" id="notifier">
            <div class="toast-body">
                <span class="fw-bold" id="toast-message"></span>
            </div>
        </div>
    </div>

    <section id="feed-section">
        <div class="container">
            <div id="post-list">

            </div>
            
        </div>
    </section>

    <div class="modal fade" id="barangay-posts-modal" data-bs-backdrop="static">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-dark text-light">
                    <div class="modal-title">
                        <h4 class="fw-bold" id="barangay-name"></h4>
                    </div>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body bg-dark text-light">
                    <div id="barangay-post-list">

                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" data-bs-backdrop="static" id="current-password-modal">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <h5 class="fw-bold">
                            Enter Current Password
                        </h5>
                    </div>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div>
                        <input type="text" placeholder="Current Password" class="form-control" id="current-password">
                        <div class="invalid-feedback" id="current-password-error">

                        </div>
                        <button id="confirm-current-password" class="btn btn-dark w-100 mt-3">Confirm</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" data-bs-backdrop="static" id="update-password-modal">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <h5 class="fw-bold">
                            Enter New Password
                        </h5>
                    </div>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div>
                        <input type="password" placeholder="New Password" class="form-control" id="update-password">
                        <div class="invalid-feedback" id="update-password-error">

                        </div>
                    </div>
                    <div>

                    
                        <input type="password" placeholder="Retype New Password" class="form-control" id="retype-update-password">
                        <div class="invalid-feedback" id="retype-update-password-error">

                        </div>
                    </div>
                    <button id="confirm-update-password" class="btn btn-dark w-100 mt-3">Confirm</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
    
</body>
</html>